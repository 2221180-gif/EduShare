<% const pageTitle='My Favorites - EduShare Connect' ; const currentUser=user; %>
    <!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>
            <%= pageTitle %>
        </title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
            rel="stylesheet">
        <link rel="stylesheet" href="/css/design-system.css">
        <link rel="stylesheet" href="/css/components.css">
        <link rel="stylesheet" href="/css/style.css">
    </head>

    <body>

        <!-- Hero Section -->
        <div
            style="background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%); color: white; padding: 3rem 0 4rem; margin-bottom: 2rem;">
            <div class="container">
                <h1 style="color: white; margin-bottom: 1rem; font-size: 2.5rem;">‚ù§Ô∏è My Favorites</h1>
                <p style="font-size: 1.125rem; opacity: 0.9;">Your bookmarked resources and courses</p>
            </div>
        </div>

        <div class="container">
            <!-- Favorite Courses -->
            <section style="margin-bottom: 3rem;">
                <h2 style="margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                    üéì Favorite Courses
                    <span class="badge badge-primary">
                        <%= favoriteCourses.length %>
                    </span>
                </h2>

                <% if (favoriteCourses.length> 0) { %>
                    <div class="resource-grid">
                        <% favoriteCourses.forEach(course=> { %>
                            <div class="resource-card">
                                <div class="resource-card-image"
                                    style="background: linear-gradient(135deg, #10B981 0%, #059669 100%); display: flex; align-items: center; justify-content: center; font-size: 3rem;">
                                    üéì
                                </div>

                                <div class="resource-card-content">
                                    <div class="resource-card-header">
                                        <h3 class="resource-card-title">
                                            <%= course.title %>
                                        </h3>
                                        <button class="btn-small active" data-favorite-btn data-favorite-type="course"
                                            data-favorite-id="<%= course._id %>"
                                            style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">
                                            ‚ù§Ô∏è
                                        </button>
                                    </div>

                                    <p style="margin-bottom: 0.5rem; color: var(--text-tertiary); font-size: 0.875rem;">
                                        By <%= course.instructor ? course.instructor.username : 'Unknown' %>
                                    </p>

                                    <p class="resource-description">
                                        <%= course.description %>
                                    </p>

                                    <div class="resource-meta">
                                        <span class="badge badge-primary">
                                            <%= course.category || course.subject %>
                                        </span>
                                        <% if (course.isPremium) { %>
                                            <span class="premium-badge">Premium</span>
                                            <% } %>
                                    </div>

                                    <div class="resource-footer">
                                        <a href="/courses/<%= course._id %>" class="btn btn-primary btn-sm">View Course
                                            ‚Üí</a>
                                    </div>
                                </div>
                            </div>
                            <% }) %>
                    </div>
                    <% } else { %>
                        <div class="card" style="text-align: center; padding: 3rem 2rem;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üìö</div>
                            <h3>No favorite courses yet</h3>
                            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                                Click the ‚ù§Ô∏è button on any course to add it to your favorites
                            </p>
                            <a href="/courses" class="btn btn-primary">Browse Courses</a>
                        </div>
                        <% } %>
            </section>

            <!-- Favorite Resources -->
            <section>
                <h2 style="margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                    üìñ Favorite Resources
                    <span class="badge badge-primary">
                        <%= favoriteResources.length %>
                    </span>
                </h2>

                <% if (favoriteResources.length> 0) { %>
                    <div class="resource-grid">
                        <% favoriteResources.forEach(resource=> { %>
                            <div class="resource-card">
                                <div class="resource-card-image"
                                    style="background: linear-gradient(135deg, #4F46E5 0%, #4338CA 100%); display: flex; align-items: center; justify-content: center; font-size: 3rem;">
                                    <%= resource.fileType==='pdf' ? 'üìÑ' : resource.fileType==='video' ? 'üé•' : 'üìÅ' %>
                                </div>

                                <div class="resource-card-content">
                                    <div class="resource-card-header">
                                        <h3 class="resource-card-title">
                                            <%= resource.title %>
                                        </h3>
                                        <button class="btn-small active" data-favorite-btn data-favorite-type="resource"
                                            data-favorite-id="<%= resource._id %>"
                                            style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">
                                            ‚ù§Ô∏è
                                        </button>
                                    </div>

                                    <p class="resource-description">
                                        <%= resource.description %>
                                    </p>

                                    <div class="resource-meta">
                                        <span class="badge badge-primary">
                                            <%= resource.subject %>
                                        </span>
                                        <span class="badge badge-secondary">
                                            <%= resource.gradeLevel %>
                                        </span>
                                        <% if (resource.isPremium) { %>
                                            <span class="premium-badge">Premium</span>
                                            <% } %>
                                    </div>

                                    <div class="resource-footer">
                                        <div class="resource-stats">
                                            <span class="resource-stat">üëÅÔ∏è <%= resource.views || 0 %></span>
                                            <span class="resource-stat">‚¨áÔ∏è <%= resource.downloads || 0 %></span>
                                        </div>
                                        <a href="/resources/<%= resource._id %>" class="btn btn-primary btn-sm">View
                                            Details ‚Üí</a>
                                    </div>
                                </div>
                            </div>
                            <% }) %>
                    </div>
                    <% } else { %>
                        <div class="card" style="text-align: center; padding: 3rem 2rem;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üìñ</div>
                            <h3>No favorite resources yet</h3>
                            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                                Click the ‚ù§Ô∏è button on any resource to add it to your favorites
                            </p>
                            <a href="/resources" class="btn btn-primary">Browse Resources</a>
                        </div>
                        <% } %>
            </section>
        </div>

        <script src="/js/favorites.js"></script>
    </body>

    </html>
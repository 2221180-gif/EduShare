<%- include('../partials/header') %>

    <div class="container" style="max-width: 800px; margin-top: 20px;">
        <div class="text-center mb-2">
            <h1>üèÜ Community Leaderboard</h1>
            <p>Top contributors making education accessible for everyone.</p>
        </div>

        <div class="card">
            <% if (topUsers.length> 0) { %>
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="border-bottom: 2px solid #eee; text-align: left;">
                            <th style="padding: 15px;">Rank</th>
                            <th style="padding: 15px;">User</th>
                            <th style="padding: 15px;">Uploads</th>
                            <th style="padding: 15px; text-align: right;">Points</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% topUsers.forEach((u, index)=> { %>
                            <tr style="border-bottom: 1px solid #f5f5f5; transition: background 0.2s;"
                                class="leaderboard-row">
                                <td style="padding: 15px;">
                                    <% if (index===0) { %> ü•á <% } %>
                                            <% if (index===1) { %> ü•à <% } %>
                                                    <% if (index===2) { %> ü•â <% } %>
                                                            <% if (index> 2) { %> #<%= index + 1 %>
                                                                    <% } %>
                                </td>
                                <td style="padding: 15px;">
                                    <strong>
                                        <%= u.username %>
                                    </strong>
                                    <span class="badge" style="background: #e3f2fd; color: #1565c0; margin-left: 5px;">
                                        <%= u.profile && u.profile.gradeLevel ? u.profile.gradeLevel : 'Member' %>
                                    </span>
                                </td>
                                <td style="padding: 15px;">
                                    <%= u.gamification.uploads %>
                                </td>
                                <td
                                    style="padding: 15px; text-align: right; font-weight: bold; color: var(--primary-color);">
                                    <%= u.gamification.points %> pts
                                </td>
                            </tr>
                            <% }) %>
                    </tbody>
                </table>
                <% } else { %>
                    <div class="text-center" style="padding: 40px;">
                        <i class="fas fa-trophy fa-3x" style="color: #ccc; margin-bottom: 15px;"></i>
                        <p>No rankings yet. Be the first to upload a resource!</p>
                        <a href="/resources/upload/new" class="btn mt-2">Upload Now</a>
                    </div>
                    <% } %>
        </div>
    </div>

    <style>
        .leaderboard-row:hover {
            background-color: #f9f9f9;
        }
    </style>

    <%- include('../partials/footer') %>
<%- include('../partials/header') %>

    <div class="hero" style="padding: 60px 0; margin-bottom: 40px;">
        <div class="container text-center">
            <h1>ðŸ‡§ðŸ‡© Bangladesh News & Jobs Portal</h1>
            <p>Stay updated with the latest educational news and career opportunities.</p>
        </div>
    </div>

    <div class="container" style="margin-bottom: 80px;">
        <% if (locals.error) { %>
            <div class="alert alert-error">
                <%= error %>
            </div>
            <% } %>

                <div class="row stack-mobile" style="gap: 40px;">
                    <!-- Column 1: Educational News -->
                    <div class="col-6 col-md-12">
                        <div
                            style="display: flex; align-items: center; gap: 15px; margin-bottom: 25px; flex-wrap: wrap;">
                            <i class="fas fa-newspaper fa-2x" style="color: var(--primary-color);"></i>
                            <h2 style="font-size: 1.8rem;">Educational News</h2>
                            <% if (user && user.department) { %>
                                <span
                                    style="background: var(--primary-color); color: white; font-size: 0.75rem; padding: 6px 12px; border-radius: 20px; font-weight: 600; white-space: nowrap; display: inline-flex; align-items: center; gap: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <i class="fas fa-star"></i> Personalized for <%= user.department %>
                                </span>
                                <% } %>
                        </div>

                        <div class="news-list" style="display: flex; flex-direction: column; gap: 20px;">
                            <% if (news && news.length> 0) { %>
                                <% news.forEach(item=> { %>
                                    <a href="<%= item.link %>" target="_blank" class="card"
                                        style="text-decoration: none; display: block; padding: 25px; transition: all 0.3s ease; border-left: 4px solid var(--primary-color);">
                                        <div
                                            style="display: flex; justify-content: space-between; margin-bottom: 12px; align-items: center;">
                                            <span class="badge"
                                                style="background: rgba(79, 70, 229, 0.1); color: var(--primary-color); font-weight: 600; font-size: 0.75rem; padding: 4px 10px; border-radius: 4px;">
                                                <%= item.source %>
                                            </span>
                                            <small style="color: #718096; font-size: 0.8rem;">
                                                <i class="far fa-calendar-alt"></i>
                                                <%= item.pubDate %>
                                            </small>
                                        </div>
                                        <h3
                                            style="font-size: 1.15rem; margin-bottom: 12px; color: var(--text-color); line-height: 1.4; font-weight: 700;">
                                            <%= item.title %>
                                        </h3>
                                        <p
                                            style="font-size: 0.95rem; color: var(--text-muted); display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; line-height: 1.6;">
                                            <%= item.snippet %>
                                        </p>
                                        <div
                                            style="margin-top: 15px; color: var(--primary-color); font-size: 0.9rem; font-weight: 600;">
                                            Read More <i class="fas fa-arrow-right"
                                                style="font-size: 0.8rem; margin-left: 5px;"></i>
                                        </div>
                                    </a>
                                    <% }); %>
                                        <% } else { %>
                                            <p class="text-muted">No news available at the moment.</p>
                                            <% } %>
                        </div>
                    </div>

                    <!-- Column 2: Job Circulars -->
                    <div class="col-6 col-md-12">
                        <div
                            style="display: flex; align-items: center; gap: 15px; margin-bottom: 25px; flex-wrap: wrap;">
                            <i class="fas fa-briefcase fa-2x" style="color: var(--accent-color);"></i>
                            <h2 style="font-size: 1.8rem;">Job Circulars</h2>
                            <% if (user && user.department) { %>
                                <span
                                    style="background: var(--accent-color); color: white; font-size: 0.75rem; padding: 6px 12px; border-radius: 20px; font-weight: 600; white-space: nowrap; display: inline-flex; align-items: center; gap: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <i class="fas fa-star"></i> Personalized for <%= user.department %>
                                </span>
                                <% } else if (user) { %>
                                    <a href="/profile/settings"
                                        style="background: #fbbf24; color: #78350f; text-decoration: none; font-size: 0.75rem; padding: 6px 12px; border-radius: 20px; font-weight: 600; white-space: nowrap; display: inline-flex; align-items: center; gap: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.3s ease;"
                                        onmouseover="this.style.background='#f59e0b'"
                                        onmouseout="this.style.background='#fbbf24'">
                                        <i class="fas fa-exclamation-circle"></i> Set department for personalized jobs
                                    </a>
                                    <% } %>
                        </div>

                        <div class="jobs-list" style="display: flex; flex-direction: column; gap: 20px;">
                            <% if (jobs && jobs.length> 0) { %>
                                <% jobs.forEach(item=> { %>
                                    <a href="<%= item.link %>" target="_blank" class="card"
                                        style="text-decoration: none; display: block; padding: 25px; border-left: 4px solid var(--accent-color);">
                                        <div
                                            style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            <span class="badge"
                                                style="background: #fff5f5; color: var(--accent-color); font-weight: 500;">New
                                                Opening</span>
                                            <small style="color: #718096;">
                                                <%= item.pubDate %>
                                            </small>
                                        </div>
                                        <h3 style="font-size: 1.2rem; margin-bottom: 10px; color: var(--text-color);">
                                            <%= item.title %>
                                        </h3>
                                        <div style="display: flex; gap: 10px; margin-top: 15px;">
                                            <span style="font-size: 0.85rem; color: #718096;"><i
                                                    class="fas fa-search"></i>
                                                <%= item.source %>
                                            </span>
                                        </div>
                                    </a>
                                    <% }); %>
                                        <% } else { %>
                                            <p class="text-muted">No job circulars found at the moment.</p>
                                            <% } %>
                        </div>
                        </section>
                    </div>
                </div>

                <%- include('../partials/footer') %>